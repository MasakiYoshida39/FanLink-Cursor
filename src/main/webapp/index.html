<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FanLink</title>
    <link rel="stylesheet" href="css/style.css?v=2.0">
    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script>
        // QRGenãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ãŸQRã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
        window.generateQRGenQRCode = function(text, size = 200) {
            return new Promise((resolve, reject) => {
                console.log('QRGen QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆé–‹å§‹:', text);
                
                try {
                    // URLã®æ¤œè¨¼ã¨ä¿®æ­£
                    let validUrl = text.trim();
                    if (!validUrl.startsWith('http://') && !validUrl.startsWith('https://')) {
                        validUrl = 'https://' + validUrl;
                    }
                    
                    // QRGenãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ã¦QRã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆ
                    const qr = qrcode(0, 'M');
                    qr.addData(validUrl);
                    qr.make();
                    
                    // SVGã¨ã—ã¦ç”Ÿæˆ
                    const svg = qr.createSvgTag({
                        cellSize: Math.floor(size / qr.getModuleCount()),
                        margin: 4,
                        scalable: true
                    });
                    
                    // SVGã‚’DataURLã«å¤‰æ›
                    const svgBlob = new Blob([svg], { type: 'image/svg+xml' });
                    const url = URL.createObjectURL(svgBlob);
                    
                    // Canvasã«æç”»ã—ã¦PNGã«å¤‰æ›
                    const canvas = document.createElement('canvas');
                    canvas.width = size;
                    canvas.height = size;
                    const ctx = canvas.getContext('2d');
                    
                    // èƒŒæ™¯ã‚’ç´”ç™½ã§å¡—ã‚Šã¤ã¶ã—
                    ctx.fillStyle = '#FFFFFF';
                    ctx.fillRect(0, 0, size, size);
                    
                    // SVGã‚’èª­ã¿è¾¼ã‚“ã§æç”»
                    const img = new Image();
                    img.onload = function() {
                        ctx.drawImage(img, 0, 0, size, size);
                        const dataURL = canvas.toDataURL('image/png');
                        URL.revokeObjectURL(url);
                        console.log('âœ… QRGen QRã‚³ãƒ¼ãƒ‰ç”ŸæˆæˆåŠŸ');
                        resolve(dataURL);
                    };
                    img.onerror = function() {
                        URL.revokeObjectURL(url);
                        reject(new Error('SVGç”»åƒã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ'));
                    };
                    img.src = url;
                    
                } catch (error) {
                    console.error('âŒ QRGen QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚¨ãƒ©ãƒ¼:', error);
                    reject(error);
                }
            });
        };

        // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”¨ï¼šQRCode.jsãƒ©ã‚¤ãƒ–ãƒ©ãƒª
        window.generateQRCodeJS = function(text, size = 200) {
            return new Promise((resolve, reject) => {
                console.log('QRCode.js QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆé–‹å§‹:', text);
                
                try {
                    // URLã®æ¤œè¨¼ã¨ä¿®æ­£
                    let validUrl = text.trim();
                    if (!validUrl.startsWith('http://') && !validUrl.startsWith('https://')) {
                        validUrl = 'https://' + validUrl;
                    }
                    
                    // QRCode.jsãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ã¦QRã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆ
                    const canvas = document.createElement('canvas');
                    QRCode.toCanvas(canvas, validUrl, {
                        width: size,
                        margin: 2,
                        color: {
                            dark: '#000000',  // ç´”é»’
                            light: '#FFFFFF'  // ç´”ç™½
                        },
                        errorCorrectionLevel: 'M' // ä¸­ãƒ¬ãƒ™ãƒ«ã‚¨ãƒ©ãƒ¼è¨‚æ­£
                    }, function (error) {
                        if (error) {
                            console.error('QRCode.jsç”Ÿæˆã‚¨ãƒ©ãƒ¼:', error);
                            reject(error);
                        } else {
                            const dataURL = canvas.toDataURL('image/png');
                            console.log('âœ… QRCode.js QRã‚³ãƒ¼ãƒ‰ç”ŸæˆæˆåŠŸ');
                            resolve(dataURL);
                        }
                    });
                    
                } catch (error) {
                    console.error('âŒ QRCode.js QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚¨ãƒ©ãƒ¼:', error);
                    reject(error);
                }
            });
        };

        // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”¨ï¼šã‚·ãƒ³ãƒ—ãƒ«ãªSVG QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
        window.generateSimpleQRCode = function(text, size = 200) {
            return new Promise((resolve, reject) => {
                console.log('ã‚·ãƒ³ãƒ—ãƒ«QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆé–‹å§‹:', text);
                
                try {
                    // URLã®æ¤œè¨¼ã¨ä¿®æ­£
                    let validUrl = text.trim();
                    if (!validUrl.startsWith('http://') && !validUrl.startsWith('https://')) {
                        validUrl = 'https://' + validUrl;
                    }
                    
                    // ã‚·ãƒ³ãƒ—ãƒ«ãªQRã‚³ãƒ¼ãƒ‰é¢¨ã®SVGã‚’ç”Ÿæˆ
                    const svg = `
                        <svg width="${size}" height="${size}" xmlns="http://www.w3.org/2000/svg">
                            <defs>
                                <pattern id="qr-pattern" x="0" y="0" width="8" height="8" patternUnits="userSpaceOnUse">
                                    <rect width="4" height="4" fill="black"/>
                                    <rect x="4" y="4" width="4" height="4" fill="black"/>
                                </pattern>
                            </defs>
                            <rect width="${size}" height="${size}" fill="white"/>
                            <rect width="${size}" height="${size}" fill="url(#qr-pattern)"/>
                            <rect x="10" y="10" width="20" height="20" fill="white"/>
                            <rect x="12" y="12" width="16" height="16" fill="black"/>
                            <rect x="14" y="14" width="12" height="12" fill="white"/>
                            <rect x="16" y="16" width="8" height="8" fill="black"/>
                            <rect x="${size-30}" y="10" width="20" height="20" fill="white"/>
                            <rect x="${size-28}" y="12" width="16" height="16" fill="black"/>
                            <rect x="${size-26}" y="14" width="12" height="12" fill="white"/>
                            <rect x="${size-24}" y="16" width="8" height="8" fill="black"/>
                            <rect x="10" y="${size-30}" width="20" height="20" fill="white"/>
                            <rect x="12" y="${size-28}" width="16" height="16" fill="black"/>
                            <rect x="14" y="14" width="12" height="12" fill="white"/>
                            <rect x="16" y="${size-24}" width="8" height="8" fill="black"/>
                            <text x="${size/2}" y="${size-10}" text-anchor="middle" font-family="Arial" font-size="10" fill="black">
                                ${validUrl.substring(0, 15)}${validUrl.length > 15 ? '...' : ''}
                            </text>
                        </svg>
                    `;
                    
                    const dataURL = 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(svg)));
                    console.log('âœ… ã‚·ãƒ³ãƒ—ãƒ«QRã‚³ãƒ¼ãƒ‰ç”ŸæˆæˆåŠŸ');
                    resolve(dataURL);
                    
                } catch (error) {
                    console.error('âŒ ã‚·ãƒ³ãƒ—ãƒ«QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚¨ãƒ©ãƒ¼:', error);
                    reject(error);
                }
            });
        };

        // ãƒ‡ãƒãƒƒã‚°ç”¨ï¼šQRGen QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ†ã‚¹ãƒˆ
        window.testQRGenQRCode = function() {
            console.log('=== QRGen QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ†ã‚¹ãƒˆé–‹å§‹ ===');
            
            // QRGenãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒåˆ©ç”¨å¯èƒ½ã‹ãƒã‚§ãƒƒã‚¯
            if (typeof qrcode !== 'undefined') {
                console.log('QRGenãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒåˆ©ç”¨å¯èƒ½ã§ã™');
                
                window.generateQRGenQRCode('https://example.com', 200).then(dataURL => {
                    console.log('âœ… QRGen QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆã«æˆåŠŸ:', dataURL.substring(0, 50) + '...');
                    
                    // çµæœã‚’ç”»é¢ã«è¡¨ç¤º
                    const resultDiv = document.createElement('div');
                    resultDiv.innerHTML = '<h3>QRGen QRã‚³ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆçµæœ:</h3><img src="' + dataURL + '" alt="QRGen Test QR Code" style="border: 1px solid #ccc; margin: 10px;">';
                    resultDiv.style.cssText = 'position: fixed; top: 10px; left: 10px; background: white; padding: 10px; border: 1px solid #ccc; z-index: 1000; max-width: 200px;';
                    document.body.appendChild(resultDiv);
                    
                    // 10ç§’å¾Œã«å‰Šé™¤
                    setTimeout(() => {
                        if (resultDiv.parentNode) {
                            resultDiv.parentNode.removeChild(resultDiv);
                        }
                    }, 10000);
                }).catch(error => {
                    console.error('âŒ QRGen QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆã«å¤±æ•—:', error);
                    testQRCodeJS();
                });
            } else {
                console.log('QRGenãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒåˆ©ç”¨ã§ãã¾ã›ã‚“ã€QRCode.jsã‚’è©¦è¡Œ');
                testQRCodeJS();
            }
        };

        // QRCode.js QRã‚³ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆ
        function testQRCodeJS() {
            console.log('QRCode.js QRã‚³ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            // QRCode.jsãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å‹•çš„ã«èª­ã¿è¾¼ã¿
            if (typeof QRCode === 'undefined') {
                const script = document.createElement('script');
                script.src = 'https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js';
                script.onload = function() {
                    console.log('QRCode.jsãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ');
                    testQRCodeJSAfterLoad();
                };
                script.onerror = function() {
                    console.log('QRCode.jsãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã€ã‚·ãƒ³ãƒ—ãƒ«QRã‚³ãƒ¼ãƒ‰ã‚’è©¦è¡Œ');
                    testSimpleQRCode();
                };
                document.head.appendChild(script);
            } else {
                testQRCodeJSAfterLoad();
            }
        }

        function testQRCodeJSAfterLoad() {
            window.generateQRCodeJS('https://example.com', 200).then(dataURL => {
                console.log('âœ… QRCode.js QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆã«æˆåŠŸ');
                
                const resultDiv = document.createElement('div');
                resultDiv.innerHTML = '<h3>QRCode.js QRã‚³ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆçµæœ:</h3><img src="' + dataURL + '" alt="QRCode.js Test QR Code" style="border: 1px solid #ccc; margin: 10px;">';
                resultDiv.style.cssText = 'position: fixed; top: 10px; right: 10px; background: white; padding: 10px; border: 1px solid #ccc; z-index: 1000; max-width: 200px;';
                document.body.appendChild(resultDiv);
                
                setTimeout(() => {
                    if (resultDiv.parentNode) {
                        resultDiv.parentNode.removeChild(resultDiv);
                    }
                }, 10000);
            }).catch(error => {
                console.error('âŒ QRCode.js QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆã«ã‚‚å¤±æ•—:', error);
                testSimpleQRCode();
            });
        }

        // ã‚·ãƒ³ãƒ—ãƒ«QRã‚³ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆ
        function testSimpleQRCode() {
            console.log('ã‚·ãƒ³ãƒ—ãƒ«QRã‚³ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            window.generateSimpleQRCode('https://example.com', 200).then(dataURL => {
                console.log('âœ… ã‚·ãƒ³ãƒ—ãƒ«QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆã«æˆåŠŸ');
                
                const resultDiv = document.createElement('div');
                resultDiv.innerHTML = '<h3>ã‚·ãƒ³ãƒ—ãƒ«QRã‚³ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆçµæœ:</h3><img src="' + dataURL + '" alt="Simple Test QR Code" style="border: 1px solid #ccc; margin: 10px;">';
                resultDiv.style.cssText = 'position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 10px; border: 1px solid #ccc; z-index: 1000; max-width: 200px;';
                document.body.appendChild(resultDiv);
                
                setTimeout(() => {
                    if (resultDiv.parentNode) {
                        resultDiv.parentNode.removeChild(resultDiv);
                    }
                }, 10000);
            }).catch(error => {
                console.error('âŒ ã™ã¹ã¦ã®QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆã«å¤±æ•—:', error);
            });
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†æ™‚ã®ç¢ºèª
        window.addEventListener('load', function() {
            console.log('ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†ã€QRGen QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ã‚’ç¢ºèªä¸­...');
            
            if (typeof qrcode !== 'undefined') {
                console.log('âœ… QRGenãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒåˆ©ç”¨å¯èƒ½ã§ã™');
            } else {
                console.log('âš ï¸ QRGenãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒåˆ©ç”¨ã§ãã¾ã›ã‚“ã€ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’ä½¿ç”¨ã—ã¾ã™');
            }
        });

        document.addEventListener('DOMContentLoaded', function() {
            const photoInput = document.getElementById('photo');
            const previewPhoto = document.getElementById('previewPhoto');
            const nameInput = document.getElementById('name');
            const previewName = document.getElementById('previewName');
            const companyInput = document.getElementById('company');
            const previewCompany = document.getElementById('previewCompany');
            const positionInput = document.getElementById('position');
            const previewPosition = document.getElementById('previewPosition');
            const phoneInput = document.getElementById('phone');
            const previewPhone = document.getElementById('previewPhone');
            const emailInput = document.getElementById('email');
            const previewEmail = document.getElementById('previewEmail');
            const addressInput = document.getElementById('address');
            const previewAddress = document.getElementById('previewAddress');
            const websiteInput = document.getElementById('website');
            const previewWebsite = document.getElementById('previewWebsite');
            const sampleBtn = document.getElementById('sampleBtn');
            const qrUrlInput = document.getElementById('qrUrl');
            const previewQr = document.getElementById('previewQr');
            const downloadBtn = document.getElementById('downloadBtn');
            const downloadBg1920Btn = document.getElementById('downloadBg1920Btn');
            const downloadBg1254Btn = document.getElementById('downloadBg1254Btn');

            if (photoInput && previewPhoto) {
                photoInput.addEventListener('change', function(event) {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            // ç”»åƒã‚’ãƒªã‚µã‚¤ã‚ºã—ã¦ã‹ã‚‰åæ˜ 
                            const img = new Image();
                            img.onload = function() {
                                const maxW = 300, maxH = 300;
                                let w = img.width, h = img.height;
                                if (w > maxW || h > maxH) {
                                    const scale = Math.min(maxW / w, maxH / h);
                                    w = Math.round(w * scale);
                                    h = Math.round(h * scale);
                                }
                                const canvas = document.createElement('canvas');
                                canvas.width = w;
                                canvas.height = h;
                                const ctx = canvas.getContext('2d');
                                ctx.drawImage(img, 0, 0, w, h);
                                previewPhoto.src = canvas.toDataURL('image/jpeg', 0.85);
                                previewPhoto.style.display = 'block';
                            };
                            img.src = e.target.result;
                        };
                        reader.readAsDataURL(file);
                    } else {
                        previewPhoto.src = '';
                        previewPhoto.style.display = 'none';
                    }
                });
            }

            function updatePreview() {
                if (nameInput && previewName) previewName.textContent = nameInput.value || 'æ°å';
                if (companyInput && previewCompany) previewCompany.textContent = companyInput.value || 'ä¼šç¤¾å';
                if (positionInput && previewPosition) previewPosition.textContent = positionInput.value || 'å½¹è·';
                if (phoneInput && previewPhone) previewPhone.textContent = phoneInput.value ? `ğŸ“ ${phoneInput.value}` : 'ğŸ“ é›»è©±ç•ªå·';
                if (emailInput && previewEmail) previewEmail.textContent = emailInput.value ? `ğŸ“§ ${emailInput.value}` : 'ğŸ“§ ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹';
                if (websiteInput && previewWebsite) previewWebsite.textContent = websiteInput.value ? `ğŸŒ ${websiteInput.value}` : 'ğŸŒ Webã‚µã‚¤ãƒˆ';
                if (addressInput && previewAddress) previewAddress.textContent = addressInput.value || 'ä½æ‰€';
            }

            if (nameInput) nameInput.addEventListener('input', updatePreview);
            if (companyInput) companyInput.addEventListener('input', updatePreview);
            if (positionInput) positionInput.addEventListener('input', updatePreview);
            if (phoneInput) phoneInput.addEventListener('input', updatePreview);
            if (emailInput) emailInput.addEventListener('input', updatePreview);
            if (websiteInput) websiteInput.addEventListener('input', updatePreview);
            if (addressInput) addressInput.addEventListener('input', updatePreview);

            // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
            if (sampleBtn) {
                sampleBtn.addEventListener('click', function() {
                    if (nameInput) nameInput.value = 'å±±ç”°å¤ªéƒ';
                    if (companyInput) companyInput.value = 'æ ªå¼ä¼šç¤¾ã‚µãƒ³ãƒ—ãƒ«';
                    if (positionInput) positionInput.value = 'å–¶æ¥­éƒ¨é•·';
                    if (phoneInput) phoneInput.value = '03-1234-5678';
                    if (emailInput) emailInput.value = 'yamada@sample.com';
                    if (addressInput) addressInput.value = 'ã€’100-0001 æ±äº¬éƒ½åƒä»£ç”°åŒºåƒä»£ç”°1-1-1';
                    if (websiteInput) websiteInput.value = 'www.sample.com';
                    updatePreview();
                    // ç”»åƒã¯è‡ªå‹•ã§ã¯å…¥ã‚Œãªã„
                });
            }

            // åˆæœŸåŒ–
            updatePreview();

            async function updateQrPreview() {
                if (qrUrlInput && previewQr) {
                    const url = qrUrlInput.value.trim();
                    if (url) {
                        try {
                            const dataUrl = await window.generateQRGenQRCode(url, 60);
                            previewQr.src = dataUrl;
                            previewQr.style.display = 'block';
                        } catch (e) {
                            previewQr.src = '';
                            previewQr.style.display = 'none';
                        }
                    } else {
                        previewQr.src = '';
                        previewQr.style.display = 'none';
                    }
                }
            }

            if (qrUrlInput) qrUrlInput.addEventListener('input', updateQrPreview);
            updateQrPreview();

            function downloadCardImage(width, height, filename) {
                const card = document.querySelector('#cardPreview .business-card');
                if (!card) return;
                // ä¸€æ™‚çš„ã«æ‹¡å¤§ç”¨ã®ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’ä½œæˆ
                const wrapper = document.createElement('div');
                wrapper.style.width = width + 'px';
                wrapper.style.height = height + 'px';
                wrapper.style.display = 'flex';
                wrapper.style.alignItems = 'center';
                wrapper.style.justifyContent = 'center';
                wrapper.style.background = '#fff';
                wrapper.appendChild(card.cloneNode(true));
                document.body.appendChild(wrapper);
                html2canvas(wrapper, {width, height, backgroundColor: '#fff', scale: 1}).then(canvas => {
                    const link = document.createElement('a');
                    link.href = canvas.toDataURL('image/png');
                    link.download = filename;
                    link.click();
                    document.body.removeChild(wrapper);
                });
            }

            if (downloadBtn) {
                downloadBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    const cardHtml = document.getElementById('cardPreview').innerHTML;
                    const blob = new Blob(
                        [
                            '<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><title>ååˆº</title></head><body style="background:#f8f9fa;">',
                            cardHtml,
                            '</body></html>'
                        ],
                        { type: 'text/html' }
                    );
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'business-card.html';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                });
            }

            if (downloadBg1920Btn) {
                downloadBg1920Btn.addEventListener('click', function() {
                    downloadCardImage(1920, 1080, 'business-card-bg-1920x1080.png');
                });
            }
            if (downloadBg1254Btn) {
                downloadBg1254Btn.addEventListener('click', function() {
                    downloadCardImage(1254, 758, 'business-card-1254x758.png');
                });
            }
        });
    </script>
</head>
<body>
    <div class="container">
        <header>
            <h1>FanLink</h1>
            <p>ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãªååˆºã‚’ç°¡å˜ã«ä½œæˆ</p>
        </header>
        
        <main>
            <div class="card-creator">
                <div class="form-section">
                    <h2>ååˆºæƒ…å ±å…¥åŠ›</h2>
                    <form id="businessCardForm">
                        <div class="form-group">
                            <label for="photo">å†™çœŸ/ãƒ­ã‚´ç”»åƒ</label>
                            <input type="file" id="photo" name="photo" accept="image/*">
                        </div>
                        <div class="form-group">
                            <label for="name">æ°å *</label>
                            <input type="text" id="name" name="name" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="company">ä¼šç¤¾å</label>
                            <input type="text" id="company" name="company">
                        </div>
                        
                        <div class="form-group">
                            <label for="position">å½¹è·</label>
                            <input type="text" id="position" name="position">
                        </div>
                        
                        <div class="form-group">
                            <label for="phone">é›»è©±ç•ªå·</label>
                            <input type="tel" id="phone" name="phone">
                        </div>
                        
                        <div class="form-group">
                            <label for="email">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
                            <input type="email" id="email" name="email">
                        </div>
                        
                        <div class="form-group">
                            <label for="address">ä½æ‰€</label>
                            <textarea id="address" name="address" rows="3" placeholder="ã€’100-0001 æ±äº¬éƒ½åƒä»£ç”°åŒºåƒä»£ç”°1-1-1"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="website">Webã‚µã‚¤ãƒˆ</label>
                            <input type="url" id="website" name="website">
                        </div>
                        
                        <div class="form-group">
                            <label for="qrUrl">QRã‚³ãƒ¼ãƒ‰ç”¨URL</label>
                            <input type="url" id="qrUrl" name="qrUrl" placeholder="https://example.com">
                            <small class="form-help">QRã‚³ãƒ¼ãƒ‰ã«è¡¨ç¤ºã—ãŸã„URLã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆQRGenãƒ©ã‚¤ãƒ–ãƒ©ãƒªä½¿ç”¨ï¼‰</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="template">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</label>
                            <select id="template" name="template">
                                <option value="classic">ã‚¯ãƒ©ã‚·ãƒƒã‚¯</option>
                                <option value="modern">ãƒ¢ãƒ€ãƒ³</option>
                                <option value="minimal">ãƒŸãƒ‹ãƒãƒ«</option>
                                <option value="creative">ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="color">ã‚«ãƒ©ãƒ¼ãƒ†ãƒ¼ãƒ</label>
                            <select id="color" name="color">
                                <option value="blue">ãƒ–ãƒ«ãƒ¼</option>
                                <option value="green">ã‚°ãƒªãƒ¼ãƒ³</option>
                                <option value="red">ãƒ¬ãƒƒãƒ‰</option>
                                <option value="purple">ãƒ‘ãƒ¼ãƒ—ãƒ«</option>
                                <option value="orange">ã‚ªãƒ¬ãƒ³ã‚¸</option>
                            </select>
                        </div>
                        
                        <div class="button-group">
                            <button type="submit" id="downloadBtn" class="primary">ååˆºHTMLãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
                            <button type="button" id="downloadBg1920Btn" class="secondary">ZoomèƒŒæ™¯ç”¨ç”»åƒ(1920Ã—1080)ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
                            <button type="button" id="downloadBg1254Btn" class="secondary">ååˆºãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰(1254Ã—758)ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
                            <button type="button" id="sampleBtn" class="secondary">ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿</button>
                            <button type="button" id="clearBtn" class="danger">ã‚¯ãƒªã‚¢</button>
                        </div>
                    </form>
                </div>
                
                <div class="preview-section">
                    <h2>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h2>
                    <p class="preview-note">â€» å…¥åŠ›å†…å®¹ã¯ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§åæ˜ ã•ã‚Œã¾ã™</p>
                    <div id="cardPreview" class="card-preview">
                        <div class="business-card">
                            <div class="card-header" style="display:flex; align-items:center; gap:8px;">
                                <h3 class="card-name" id="previewName">æ°å</h3>
                                <img id="previewPhoto" src="" alt="å†™çœŸ" style="display:none; width:48px; height:48px; object-fit:cover; border-radius:50%; margin-left:12px;">
                            </div>
                            <div class="card-company" id="previewCompany">ä¼šç¤¾å</div>
                            <div class="card-position" id="previewPosition">å½¹è·</div>
                            <div class="card-contact" style="display:flex; align-items:flex-start; gap:12px;">
                                <div style="flex:1;">
                                    <div id="previewPhone">ğŸ“ é›»è©±ç•ªå·</div>
                                    <div id="previewEmail">ğŸ“§ ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</div>
                                    <div id="previewWebsite">ğŸŒ Webã‚µã‚¤ãƒˆ</div>
                                </div>
                                <img id="previewQr" src="" alt="QRã‚³ãƒ¼ãƒ‰" style="display:none; width:60px; height:60px; margin-top:0; flex-shrink:0;">
                            </div>
                            <div class="card-address" id="previewAddress">ä½æ‰€</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- <script src="js/app.js?v=2.0"></script> -->
</body>
</html> 